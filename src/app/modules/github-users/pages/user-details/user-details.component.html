@if (userDetailsSelector | async; as user) {
<form id="form">
  <div class="container mx-auto shadow bg-white">
    <div class="xl:w-full border-b border-gray-300 py-5">
      <div class="flex items-center w-11/12 mx-auto">
        <p class="text-lg text-gray-800 font-bold">{{ user.name }}'s profile</p>
      </div>
    </div>
    <div class="w-11/12 mx-auto pb-10">
      <div class="xl:w-9/12 mx-auto xl:mx-0">
        <div class="bg-center bg-cover bg-no-repeat rounded relative mt-8 h-48">
          <img
            src="https://cdn.tuk.dev/assets/photo-1519252161722-1d52d47ac7df.jpg"
            alt=""
            class="w-full h-full object-cover overflow-hidden rounded shadow"
          />
          <div
            class="w-20 h-20 rounded-full bg-cover bg-center bg-no-repeat absolute bottom-0 -mb-10 ml-12 shadow"
          >
            <img
              [src]="user.avatar_url"
              alt=""
              class="w-full h-full object-cover overflow-hidden absolute z-0 rounded-full shadow"
            />
          </div>
        </div>
        <div
          class="pt-3 xl:pt-5 flex flex-col xl:flex-row items-start xl:items-start justify-between mt-10 gap-y-6"
        >
          <div class="xl:pr-16 w-full xl:w-2/3">
            <div
              class="text-center xl:text-left mb-3 xl:mb-0 flex flex-col xl:flex-row items-center justify-between xl:justify-start"
            >
              <h2
                class="mb-3 xl:mb-0 xl:mr-4 text-2xl tracking-normal font-bold text-gray-800"
              >
                {{ user.name }}
              </h2>
            </div>
            <p
              class="text-center xl:text-left mt-2 text-sm tracking-normal text-gray-400 leading-5"
            >
              {{ user.bio }}
            </p>
            <div class="mt-3 flex flex-col gap-3 xl:items-start items-center">
              @if(user.location){
              <div class="flex items-center gap-2">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="text-gray-800 size-4"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="m6.115 5.19.319 1.913A6 6 0 0 0 8.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 0 0 2.288-4.042 1.087 1.087 0 0 0-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 0 1-.98-.314l-.295-.295a1.125 1.125 0 0 1 0-1.591l.13-.132a1.125 1.125 0 0 1 1.3-.21l.603.302a.809.809 0 0 0 1.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 0 0 1.528-1.732l.146-.292M6.115 5.19A9 9 0 1 0 17.18 4.64M6.115 5.19A8.965 8.965 0 0 1 12 3c1.929 0 3.716.607 5.18 1.64"
                  />
                </svg>
                <p class="text-gray-400 text-sm">{{ user.location }}</p>
              </div>
              } @if(user.company){
              <div class="flex items-center gap-2">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="size-4"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"
                  />
                </svg>
                <p class="text-gray-400 text-sm">{{ user.company }}</p>
              </div>
              }

              <div class="flex items-center gap-4">
                <div
                  matTooltip="Followers"
                  class="cursor-pointer flex items-center gap-1"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="text-gray-800 size-4"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"
                    />
                  </svg>
                  <p class="text-gray-400 text-sm">{{ user.followers }}</p>
                </div>

                <div
                  matTooltip="Following"
                  class="cursor-pointer flex items-center gap-1"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="text-gray-800 size-4"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"
                    />
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
                    />
                  </svg>
                  <p class="text-gray-400 text-sm">{{ user.following }}</p>
                </div>
              </div>
            </div>
          </div>
          <div
            class="w-full xl:w-2/3 flex-col md:flex-row justify-center xl:justify-end flex md:pl-6"
          >
            <div
              class="flex items-center justify-center xl:justify-start mt-1 md:mt-0 mb-5 md:mb-0"
            >
              <div
                class="ml-5 rounded-full bg-green-200 text-green-500 text-sm px-6 py-2 flex justify-center items-center"
              >
                Available
              </div>
            </div>
            <button
              class="focus:outline-none ml-0 md:ml-5 bg-indigo-700 dark:bg-indigo-600 transition duration-150 ease-in-out hover:bg-indigo-600 rounded text-white px-3 md:px-6 py-2 text-sm"
            >
              Message
            </button>
          </div>
        </div>
      </div>

      <div class="xl:w-9/12 mx-auto xl:mx-0 mt-10">
        <div class="flex justify-between items-center gap-4 mb-3 xl:mb-0">
          <h2 class="text-2xl tracking-normal font-bold text-gray-800">
            Repositories
          </h2>
          <select id="select-dropdown"
            aria-label="Selected tab"
            (change)="onSortChange($event.target)"
            class="focus:outline-none form-select block w-full max-w-64 p-1 border-2 border-gray-300 rounded-b text-gray-600 appearance-none bg-transparent relative z-10 !rounded-md"
          >
            <option selected value="created" class="text-sm text-gray-600">
              Created at
            </option>
            <option value="updated" class="text-sm text-gray-600">
              Updated at
            </option>
            <option value="pushed" class="text-sm text-gray-600">
              Pushed at
            </option>
            <option value="full_name" class="text-sm text-gray-600">
              Full name
            </option>
          </select>
        </div>
        <div class="mt-4 grid md:grid-cols-2 gap-5 items-stretch">
          @for(repo of userRepositories | async; track repo){
          <app-repository-card
            [respository]="repo"
            class="h-full block"
          ></app-repository-card>
          } @empty {
            <div class="bg-green-500 md:col-span-2 h-[300px]">
                <app-empty-list [message]="'No repositories found for this user'"></app-empty-list>
            </div>
          }
        </div>

        @if((userRepositories | async).length){
        <div class="flex justify-center mt-6">
          <button type="button" id="load-more-button"
            (click)="onLoadMore()"
            class="bg-indigo-700 transition duration-150 ease-in-out hover:bg-indigo-600 rounded text-white px-8 py-2 text-sm focus:outline-none"
          >
            Load More
          </button>
        </div>
        }
      </div>
    </div>
  </div>
</form>
} @else {
<div class="flex justify-center items-center h-[400px]">
  Cannot load user data
</div>
}
